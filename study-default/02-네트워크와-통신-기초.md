# ğŸŒ ë„¤íŠ¸ì›Œí¬ì™€ í†µì‹  ê¸°ì´ˆ

## ğŸ“š ëª©ì°¨
1. [ë„¤íŠ¸ì›Œí¬ ê¸°ë³¸ ê°œë…](#ë„¤íŠ¸ì›Œí¬-ê¸°ë³¸-ê°œë…)
2. [OSI 7ê³„ì¸µê³¼ TCP/IP](#osi-7ê³„ì¸µê³¼-tcpip)
3. [HTTP/HTTPS í”„ë¡œí† ì½œ](#httphttps-í”„ë¡œí† ì½œ)
4. [WebSocket ì‹¤ì‹œê°„ í†µì‹ ](#websocket-ì‹¤ì‹œê°„-í†µì‹ )
5. [API í†µì‹  íŒ¨í„´](#api-í†µì‹ -íŒ¨í„´)

---

## ğŸ”Œ ë„¤íŠ¸ì›Œí¬ ê¸°ë³¸ ê°œë…

### ë„¤íŠ¸ì›Œí¬ë€?
ì»´í“¨í„°ë“¤ì´ ì„œë¡œ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆë„ë¡ ì—°ê²°ëœ ì‹œìŠ¤í…œ

```mermaid
graph TB
    subgraph "ë„¤íŠ¸ì›Œí¬ ì¢…ë¥˜"
        LAN[LAN<br/>ê·¼ê±°ë¦¬ ë„¤íŠ¸ì›Œí¬]
        WAN[WAN<br/>ê´‘ì—­ ë„¤íŠ¸ì›Œí¬]
        Internet[Internet<br/>ì „ì„¸ê³„ ë„¤íŠ¸ì›Œí¬]
        
        LAN --> WAN
        WAN --> Internet
    end
```

### IP ì£¼ì†Œì™€ í¬íŠ¸
```
IP ì£¼ì†Œ: 192.168.1.100  (ì»´í“¨í„°ì˜ ì£¼ì†Œ)
í¬íŠ¸: 8000              (í”„ë¡œê·¸ë¨ì˜ ë¬¸)

ì „ì²´ ì£¼ì†Œ: 192.168.1.100:8000
```

### DNS (Domain Name System)
```mermaid
sequenceDiagram
    participant User as ì‚¬ìš©ì
    participant Browser as ë¸Œë¼ìš°ì €
    participant DNS as DNS ì„œë²„
    participant Server as ì›¹ ì„œë²„
    
    User->>Browser: www.google.com ì…ë ¥
    Browser->>DNS: "google.comì˜ IP ì£¼ì†ŒëŠ”?"
    DNS->>Browser: "142.250.207.46"
    Browser->>Server: 142.250.207.46:443 ì ‘ì†
    Server->>Browser: ì›¹í˜ì´ì§€ ì „ì†¡
```

## ğŸ“Š OSI 7ê³„ì¸µê³¼ TCP/IP

### OSI 7ê³„ì¸µ ëª¨ë¸
```mermaid
graph TB
    subgraph "OSI 7 Layers"
        L7[ì‘ìš© ê³„ì¸µ<br/>HTTP, HTTPS, FTP]
        L6[í‘œí˜„ ê³„ì¸µ<br/>ì•”í˜¸í™”, ì••ì¶•]
        L5[ì„¸ì…˜ ê³„ì¸µ<br/>ì—°ê²° ê´€ë¦¬]
        L4[ì „ì†¡ ê³„ì¸µ<br/>TCP, UDP]
        L3[ë„¤íŠ¸ì›Œí¬ ê³„ì¸µ<br/>IP, ë¼ìš°íŒ…]
        L2[ë°ì´í„°ë§í¬ ê³„ì¸µ<br/>ì´ë”ë„·]
        L1[ë¬¼ë¦¬ ê³„ì¸µ<br/>ì¼€ì´ë¸”, ì „ê¸°ì‹ í˜¸]
        
        L7 --> L6 --> L5 --> L4 --> L3 --> L2 --> L1
    end
```

### TCP vs UDP
| íŠ¹ì§• | TCP | UDP |
|------|-----|-----|
| **ì—°ê²°** | ì—°ê²° ì§€í–¥ | ë¹„ì—°ê²° |
| **ì‹ ë¢°ì„±** | ë†’ìŒ (ì¬ì „ì†¡) | ë‚®ìŒ |
| **ì†ë„** | ëŠë¦¼ | ë¹ ë¦„ |
| **ìˆœì„œ** | ë³´ì¥ | ë³´ì¥ ì•ˆë¨ |
| **ìš©ë„** | ì›¹, ì´ë©”ì¼ | ìŠ¤íŠ¸ë¦¬ë°, ê²Œì„ |

### í”„ë¡œì íŠ¸ì—ì„œì˜ í™œìš©
```python
# TCP ì†Œì¼“ (Django ì„œë²„)
# backend/chat_project/settings.py
ALLOWED_HOSTS = ['localhost', '127.0.0.1']  # TCP ì—°ê²° í—ˆìš© í˜¸ìŠ¤íŠ¸

# WebSocket ì—°ê²° (TCP ê¸°ë°˜)
# backend/chat/consumers.py
class ChatConsumer(AsyncWebsocketConsumer):
    async def connect(self):
        # TCP ì—°ê²° ìˆ˜ë¦½
        await self.accept()
```

## ğŸ”’ HTTP/HTTPS í”„ë¡œí† ì½œ

### HTTP ìš”ì²­/ì‘ë‹µ êµ¬ì¡°
```
[HTTP ìš”ì²­]
POST /api/sessions/ HTTP/1.1
Host: localhost:8000
Content-Type: application/json
Authorization: Token abc123

{
    "title": "ìƒˆ ëŒ€í™”"
}

[HTTP ì‘ë‹µ]
HTTP/1.1 201 Created
Content-Type: application/json

{
    "id": 1,
    "title": "ìƒˆ ëŒ€í™”",
    "created_at": "2024-01-01T12:00:00Z"
}
```

### HTTP ë©”ì„œë“œì™€ ìƒíƒœ ì½”ë“œ
```mermaid
graph LR
    subgraph "HTTP Methods"
        GET[GET<br/>ì¡°íšŒ]
        POST[POST<br/>ìƒì„±]
        PUT[PUT<br/>ì „ì²´ ìˆ˜ì •]
        PATCH[PATCH<br/>ë¶€ë¶„ ìˆ˜ì •]
        DELETE[DELETE<br/>ì‚­ì œ]
    end
    
    subgraph "Status Codes"
        S2XX[2XX<br/>ì„±ê³µ]
        S3XX[3XX<br/>ë¦¬ë‹¤ì´ë ‰ì…˜]
        S4XX[4XX<br/>í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜]
        S5XX[5XX<br/>ì„œë²„ ì˜¤ë¥˜]
    end
```

### HTTPS ì•”í˜¸í™” ê³¼ì •
```mermaid
sequenceDiagram
    participant Client
    participant Server
    
    Note over Client,Server: HTTPS Handshake
    Client->>Server: 1. ClientHello (ì§€ì› ì•”í˜¸í™” ë°©ì‹)
    Server->>Client: 2. ServerHello + ì¸ì¦ì„œ
    Client->>Client: 3. ì¸ì¦ì„œ ê²€ì¦
    Client->>Server: 4. ì•”í˜¸í™” í‚¤ êµí™˜
    Server->>Client: 5. ì•”í˜¸í™” í™•ì¸
    
    Note over Client,Server: ì•”í˜¸í™”ëœ í†µì‹  ì‹œì‘
    Client->>Server: ğŸ” ì•”í˜¸í™”ëœ ìš”ì²­
    Server->>Client: ğŸ” ì•”í˜¸í™”ëœ ì‘ë‹µ
```

### í”„ë¡œì íŠ¸ HTTP í†µì‹  ì˜ˆì œ
```typescript
// frontend-chat/src/services/api.ts
class APIService {
    private baseURL = 'http://localhost:8000/api';
    
    // GET ìš”ì²­
    async getSessions(): Promise<Session[]> {
        const response = await fetch(`${this.baseURL}/sessions/`, {
            method: 'GET',
            headers: {
                'Authorization': `Token ${this.getToken()}`
            }
        });
        
        if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
        }
        
        return response.json();
    }
    
    // POST ìš”ì²­
    async createSession(title: string): Promise<Session> {
        const response = await fetch(`${this.baseURL}/sessions/`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Token ${this.getToken()}`
            },
            body: JSON.stringify({ title })
        });
        
        return response.json();
    }
}
```

## ğŸ”„ WebSocket ì‹¤ì‹œê°„ í†µì‹ 

### WebSocket vs HTTP
```mermaid
graph TB
    subgraph "HTTP"
        H1[í´ë¼ì´ì–¸íŠ¸] -->|ìš”ì²­| H2[ì„œë²„]
        H2 -->|ì‘ë‹µ| H1
        H1 -.->|ì—°ê²° ì¢…ë£Œ| H2
    end
    
    subgraph "WebSocket"
        W1[í´ë¼ì´ì–¸íŠ¸] <-->|ì–‘ë°©í–¥ í†µì‹ | W2[ì„œë²„]
        W1 <-.->|ì—°ê²° ìœ ì§€| W2
    end
```

### WebSocket ì—°ê²° ê³¼ì •
```mermaid
sequenceDiagram
    participant Client as í´ë¼ì´ì–¸íŠ¸
    participant Server as ì„œë²„
    
    Client->>Server: HTTP Upgrade ìš”ì²­
    Note right of Client: GET /ws/chat/123/<br/>Upgrade: websocket
    
    Server->>Client: 101 Switching Protocols
    Note left of Server: Upgrade: websocket<br/>Connection: Upgrade
    
    Note over Client,Server: WebSocket ì—°ê²° ìˆ˜ë¦½
    
    Client->>Server: ë©”ì‹œì§€ ì „ì†¡
    Server->>Client: ë©”ì‹œì§€ ìˆ˜ì‹ 
    Client->>Server: ë©”ì‹œì§€ ì „ì†¡
    Server->>Client: ë©”ì‹œì§€ ìˆ˜ì‹ 
    
    Client->>Server: Close Frame
    Server->>Client: Close Frame
    Note over Client,Server: ì—°ê²° ì¢…ë£Œ
```

### í”„ë¡œì íŠ¸ WebSocket êµ¬í˜„
```python
# backend/chat/consumers.py
import json
from channels.generic.websocket import AsyncWebsocketConsumer

class ChatConsumer(AsyncWebsocketConsumer):
    async def connect(self):
        """WebSocket ì—°ê²° ìˆ˜ë¦½"""
        self.room_name = self.scope['url_route']['kwargs']['room_name']
        self.room_group_name = f'chat_{self.room_name}'
        
        # ê·¸ë£¹ì— ì°¸ê°€
        await self.channel_layer.group_add(
            self.room_group_name,
            self.channel_name
        )
        
        await self.accept()
    
    async def receive(self, text_data):
        """ë©”ì‹œì§€ ìˆ˜ì‹ """
        data = json.loads(text_data)
        message = data['message']
        
        # ê·¸ë£¹ ì „ì²´ì— ë©”ì‹œì§€ ë¸Œë¡œë“œìºìŠ¤íŠ¸
        await self.channel_layer.group_send(
            self.room_group_name,
            {
                'type': 'chat_message',
                'message': message
            }
        )
    
    async def chat_message(self, event):
        """ê·¸ë£¹ ë©”ì‹œì§€ ì „ì†¡"""
        await self.send(text_data=json.dumps({
            'message': event['message']
        }))
```

```typescript
// frontend-chat/src/services/websocket.ts
class WebSocketService {
    private socket: WebSocket | null = null;
    
    connect(sessionId: string) {
        const wsUrl = `ws://localhost:8000/ws/chat/${sessionId}/`;
        this.socket = new WebSocket(wsUrl);
        
        this.socket.onopen = () => {
            console.log('WebSocket ì—°ê²°ë¨');
        };
        
        this.socket.onmessage = (event) => {
            const data = JSON.parse(event.data);
            this.handleMessage(data);
        };
        
        this.socket.onerror = (error) => {
            console.error('WebSocket ì˜¤ë¥˜:', error);
        };
        
        this.socket.onclose = () => {
            console.log('WebSocket ì—°ê²° ì¢…ë£Œ');
            // ì¬ì—°ê²° ë¡œì§
            setTimeout(() => this.connect(sessionId), 3000);
        };
    }
    
    send(message: string) {
        if (this.socket?.readyState === WebSocket.OPEN) {
            this.socket.send(JSON.stringify({ message }));
        }
    }
}
```

## ğŸ“¡ API í†µì‹  íŒ¨í„´

### REST API
```mermaid
graph LR
    subgraph "RESTful Routes"
        R1[GET /api/users<br/>ì‚¬ìš©ì ëª©ë¡]
        R2[GET /api/users/1<br/>íŠ¹ì • ì‚¬ìš©ì]
        R3[POST /api/users<br/>ì‚¬ìš©ì ìƒì„±]
        R4[PUT /api/users/1<br/>ì‚¬ìš©ì ìˆ˜ì •]
        R5[DELETE /api/users/1<br/>ì‚¬ìš©ì ì‚­ì œ]
    end
```

### GraphQL vs REST
| íŠ¹ì§• | REST | GraphQL |
|------|------|---------|
| **ì—”ë“œí¬ì¸íŠ¸** | ì—¬ëŸ¬ ê°œ | ë‹¨ì¼ |
| **ë°ì´í„° ê°€ì ¸ì˜¤ê¸°** | ê³ ì •ëœ êµ¬ì¡° | í•„ìš”í•œ ê²ƒë§Œ |
| **Over-fetching** | ìˆìŒ | ì—†ìŒ |
| **Under-fetching** | ìˆìŒ | ì—†ìŒ |

### CORS (Cross-Origin Resource Sharing)
```python
# backend/chat_project/settings.py
# CORS ì„¤ì • - ë‹¤ë¥¸ ë„ë©”ì¸ì—ì„œì˜ API í˜¸ì¶œ í—ˆìš©
CORS_ALLOWED_ORIGINS = [
    "http://localhost:3000",
    "http://localhost:3001",
    "http://localhost:3002",
]

CORS_ALLOW_CREDENTIALS = True  # ì¿ í‚¤ í¬í•¨ í—ˆìš©
CORS_ALLOW_HEADERS = [
    'accept',
    'accept-encoding',
    'authorization',
    'content-type',
    'dnt',
    'origin',
    'user-agent',
    'x-csrftoken',
    'x-requested-with',
]
```

### API Rate Limiting
```python
# API í˜¸ì¶œ ì œí•œ êµ¬í˜„
from django.core.cache import cache
from django.http import JsonResponse
import time

def rate_limit(max_requests=100, window=3600):
    def decorator(view_func):
        def wrapped(request, *args, **kwargs):
            # IP ê¸°ë°˜ ì œí•œ
            ip = request.META.get('REMOTE_ADDR')
            key = f'rate_limit:{ip}'
            
            # í˜„ì¬ ìš”ì²­ ìˆ˜ í™•ì¸
            requests = cache.get(key, [])
            now = time.time()
            
            # ì‹œê°„ ìœˆë„ìš° ë‚´ì˜ ìš”ì²­ë§Œ ìœ ì§€
            requests = [req for req in requests if req > now - window]
            
            if len(requests) >= max_requests:
                return JsonResponse({'error': 'Rate limit exceeded'}, status=429)
            
            # ìƒˆ ìš”ì²­ ì¶”ê°€
            requests.append(now)
            cache.set(key, requests, window)
            
            return view_func(request, *args, **kwargs)
        return wrapped
    return decorator
```

## ğŸ” ë„¤íŠ¸ì›Œí¬ ë””ë²„ê¹…

### ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬
```
Network íƒ­ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì •ë³´:
- Request URL
- Request Method
- Status Code
- Response Headers
- Request Headers
- Response Body
- Timing (DNS, ì—°ê²°, ì‘ë‹µ ì‹œê°„)
```

### cURL ëª…ë ¹ì–´
```bash
# GET ìš”ì²­
curl -X GET http://localhost:8000/api/sessions/ \
     -H "Authorization: Token abc123"

# POST ìš”ì²­
curl -X POST http://localhost:8000/api/sessions/ \
     -H "Content-Type: application/json" \
     -H "Authorization: Token abc123" \
     -d '{"title": "ìƒˆ ì„¸ì…˜"}'

# WebSocket í…ŒìŠ¤íŠ¸
curl -i -N \
     -H "Connection: Upgrade" \
     -H "Upgrade: websocket" \
     -H "Sec-WebSocket-Version: 13" \
     -H "Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==" \
     http://localhost:8000/ws/chat/123/
```

### ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ ìµœì í™”
```typescript
// 1. HTTP/2 í™œìš©
// ì—¬ëŸ¬ ìš”ì²­ì„ ë™ì‹œì— ì²˜ë¦¬

// 2. ìš”ì²­ ë°°ì¹˜
async function batchRequests() {
    const [sessions, users, messages] = await Promise.all([
        fetch('/api/sessions/'),
        fetch('/api/users/'),
        fetch('/api/messages/')
    ]);
}

// 3. ìºì‹± í™œìš©
const cachedFetch = async (url: string) => {
    const cached = localStorage.getItem(url);
    if (cached) {
        const { data, timestamp } = JSON.parse(cached);
        if (Date.now() - timestamp < 60000) {  // 1ë¶„ ìºì‹œ
            return data;
        }
    }
    
    const response = await fetch(url);
    const data = await response.json();
    
    localStorage.setItem(url, JSON.stringify({
        data,
        timestamp: Date.now()
    }));
    
    return data;
};
```

## ğŸ“š ì°¸ê³  ìë£Œ

### ë„¤íŠ¸ì›Œí¬ ê¸°ì´ˆ
- [ë„¤íŠ¸ì›Œí¬ ê¸°ì´ˆ ì´ë¡ ](https://www.cloudflare.com/ko-kr/learning/network-layer/what-is-the-network-layer/)
- [TCP/IP ì™„ë²½ ê°€ì´ë“œ](https://www.tcpipguide.com/)
- [ì»´í“¨í„° ë„¤íŠ¸ì›Œí¬ ê°•ì˜](https://www.youtube.com/playlist?list=PL0d8NnikouEWcF1jJueLdjRIC4HsUlULi)

### HTTP/HTTPS
- [MDN - HTTP ê°œìš”](https://developer.mozilla.org/ko/docs/Web/HTTP/Overview)
- [HTTPSëŠ” ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ê°€?](https://howhttps.works/ko/)
- [HTTP/2 ì†Œê°œ](https://developers.google.com/web/fundamentals/performance/http2?hl=ko)

### WebSocket
- [MDN - WebSocket API](https://developer.mozilla.org/ko/docs/Web/API/WebSocket)
- [WebSocket í”„ë¡œí† ì½œ RFC 6455](https://datatracker.ietf.org/doc/html/rfc6455)
- [Socket.IO ë¬¸ì„œ](https://socket.io/docs/v4/)

### API ì„¤ê³„
- [RESTful API ì„¤ê³„ ê°€ì´ë“œ](https://restfulapi.net/)
- [GraphQL ê³µì‹ ë¬¸ì„œ](https://graphql.org/learn/)
- [API ì„¤ê³„ ëª¨ë²” ì‚¬ë¡€](https://swagger.io/resources/articles/best-practices-in-api-design/)

### ë„¤íŠ¸ì›Œí¬ ë„êµ¬
- [Postman ì‚¬ìš©ë²•](https://learning.postman.com/docs/getting-started/introduction/)
- [Wireshark íŠœí† ë¦¬ì–¼](https://www.wireshark.org/docs/wsug_html/)
- [Chrome DevTools Network](https://developer.chrome.com/docs/devtools/network/)

## ğŸ¯ í•µì‹¬ ì •ë¦¬

1. **ë„¤íŠ¸ì›Œí¬**ëŠ” OSI 7ê³„ì¸µ ëª¨ë¸ë¡œ êµ¬ì¡°í™”ë©ë‹ˆë‹¤
2. **HTTP/HTTPS**ëŠ” ì›¹ì˜ ê¸°ë³¸ í†µì‹  í”„ë¡œí† ì½œì…ë‹ˆë‹¤
3. **WebSocket**ì€ ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹ ì„ ì œê³µí•©ë‹ˆë‹¤
4. **REST API**ëŠ” ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤
5. **CORS**ëŠ” ë‹¤ë¥¸ ë„ë©”ì¸ ê°„ ë¦¬ì†ŒìŠ¤ ê³µìœ ë¥¼ ì œì–´í•©ë‹ˆë‹¤

---

ë‹¤ìŒ: [03-ë°ì´í„°ë² ì´ìŠ¤-ê¸°ì´ˆ.md](./03-ë°ì´í„°ë² ì´ìŠ¤-ê¸°ì´ˆ.md)