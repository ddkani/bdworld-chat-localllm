# 🛠️ 개발 도구와 환경 설정

## 📚 목차
1. [개발 환경 구성](#개발-환경-구성)
2. [버전 관리 (Git)](#버전-관리-git)
3. [패키지 관리](#패키지-관리)
4. [개발 도구](#개발-도구)
5. [배포와 CI/CD](#배포와-cicd)

---

## 💻 개발 환경 구성

### 프로젝트 개발 환경
```mermaid
graph TB
    subgraph "개발 환경"
        OS[운영체제<br/>Windows/Mac/Linux]
        LANG[프로그래밍 언어<br/>Python 3.9+, Node.js 16+]
        EDITOR[코드 에디터<br/>VS Code]
        TERM[터미널<br/>Bash/Zsh/PowerShell]
    end
    
    subgraph "프로젝트 도구"
        GIT[Git<br/>버전 관리]
        UV[uv<br/>Python 패키지]
        NPM[npm<br/>Node 패키지]
        DOCKER[Docker<br/>컨테이너]
    end
```

### 운영체제별 설정

#### macOS
```bash
# Homebrew 설치 (패키지 관리자)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 필수 도구 설치
brew install python@3.11
brew install node
brew install git

# 프로젝트 설정
cd backend
./setup_macos.sh
```

#### Windows
```powershell
# Windows PowerShell (관리자 권한)

# Chocolatey 설치 (패키지 관리자)
Set-ExecutionPolicy Bypass -Scope Process -Force
iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))

# 필수 도구 설치
choco install python3
choco install nodejs
choco install git

# 프로젝트 설정
cd backend
.\setup_windows.bat
```

#### Linux (Ubuntu/Debian)
```bash
# 패키지 업데이트
sudo apt update && sudo apt upgrade -y

# 필수 도구 설치
sudo apt install python3.11 python3-pip
sudo apt install nodejs npm
sudo apt install git

# 프로젝트 설정
cd backend
./setup_linux.sh
```

### 가상환경 설정

#### Python 가상환경
```bash
# venv 사용
python -m venv venv
source venv/bin/activate  # Mac/Linux
venv\Scripts\activate     # Windows

# uv 사용 (프로젝트 권장)
curl -LsSf https://astral.sh/uv/install.sh | sh
uv venv
source .venv/bin/activate

# 패키지 설치
uv pip install -r requirements.txt
```

#### Node.js 환경
```bash
# nvm으로 Node 버전 관리
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 18
nvm use 18

# 프로젝트 의존성 설치
npm install
```

## 🔄 버전 관리 (Git)

### Git 기본 설정
```bash
# 사용자 정보 설정
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# 편집기 설정
git config --global core.editor "code --wait"

# 줄바꿈 설정
git config --global core.autocrlf true  # Windows
git config --global core.autocrlf input # Mac/Linux

# 유용한 별칭
git config --global alias.st status
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.cm commit
git config --global alias.lg "log --oneline --graph --all"
```

### Git 워크플로우
```mermaid
graph LR
    WD[작업 디렉터리] -->|git add| SA[스테이징 영역]
    SA -->|git commit| LR[로컬 저장소]
    LR -->|git push| RR[원격 저장소]
    RR -->|git pull| LR
    LR -->|git checkout| WD
```

### 브랜치 전략
```bash
# Git Flow 전략
main            # 프로덕션 브랜치
├── develop     # 개발 브랜치
    ├── feature/login      # 기능 개발
    ├── feature/chat       # 기능 개발
    └── hotfix/bug-fix     # 긴급 수정

# 브랜치 생성 및 이동
git checkout -b feature/new-feature develop

# 작업 후 커밋
git add .
git commit -m "feat: 새로운 기능 추가"

# 개발 브랜치에 병합
git checkout develop
git merge feature/new-feature

# 원격 저장소에 푸시
git push origin develop
```

### .gitignore 설정
```gitignore
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
venv/
.venv/
env/
ENV/

# JavaScript/Node
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.npm

# 환경 변수
.env
.env.local
.env.*.local

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# OS
.DS_Store
Thumbs.db

# 프로젝트 특정
db.sqlite3
*.log
build/
dist/
*.egg-info/
models/*.gguf
```

## 📦 패키지 관리

### Python 패키지 관리 (uv)
```bash
# uv 설치
curl -LsSf https://astral.sh/uv/install.sh | sh

# 프로젝트 초기화
uv init

# 패키지 설치
uv pip install django djangorestframework
uv pip install llama-cpp-python

# requirements.txt 생성
uv pip freeze > requirements.txt

# 특정 버전 설치
uv pip install "django>=5.0,<6.0"

# 개발 의존성
uv pip install --dev pytest black flake8
```

### Node.js 패키지 관리 (npm/yarn)
```bash
# npm 사용
npm init -y
npm install react react-dom
npm install --save-dev @types/react

# package.json 스크립트
{
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "lint": "eslint src/**/*.{js,jsx,ts,tsx}"
  }
}

# yarn 사용
yarn init -y
yarn add react react-dom
yarn add -D @types/react

# 패키지 업데이트
npm update
yarn upgrade
```

### 의존성 관리
```python
# pyproject.toml (Python)
[project]
name = "llm-chat-backend"
version = "0.1.0"
dependencies = [
    "django>=5.0",
    "djangorestframework>=3.14",
    "channels>=4.0",
    "llama-cpp-python>=0.2.90",
]

[project.optional-dependencies]
dev = [
    "pytest>=7.0",
    "black>=24.0",
    "flake8>=7.0",
]
```

## 🔧 개발 도구

### VS Code 설정
```json
// .vscode/settings.json
{
  // Python
  "python.defaultInterpreterPath": "${workspaceFolder}/.venv/bin/python",
  "python.linting.enabled": true,
  "python.linting.pylintEnabled": false,
  "python.linting.flake8Enabled": true,
  "python.formatting.provider": "black",
  
  // JavaScript/TypeScript
  "typescript.tsdk": "node_modules/typescript/lib",
  "eslint.validate": [
    "javascript",
    "javascriptreact",
    "typescript",
    "typescriptreact"
  ],
  
  // 에디터
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "editor.rulers": [80, 120],
  
  // 파일
  "files.exclude": {
    "**/__pycache__": true,
    "**/*.pyc": true,
    "**/node_modules": true
  }
}
```

### VS Code 확장 프로그램
```json
// .vscode/extensions.json
{
  "recommendations": [
    // Python
    "ms-python.python",
    "ms-python.vscode-pylance",
    "ms-python.black-formatter",
    
    // JavaScript/TypeScript
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode",
    
    // React
    "dsznajder.es7-react-js-snippets",
    "burkeholland.simple-react-snippets",
    
    // Git
    "eamodio.gitlens",
    "mhutchie.git-graph",
    
    // 유틸리티
    "streetsidesoftware.code-spell-checker",
    "wayou.vscode-todo-highlight",
    "gruntfuggly.todo-tree",
    
    // 테마
    "PKief.material-icon-theme",
    "zhuangtongfa.material-theme"
  ]
}
```

### 코드 포매터와 린터

#### Python (Black + Flake8)
```bash
# 설치
pip install black flake8

# Black 설정 (pyproject.toml)
[tool.black]
line-length = 88
target-version = ['py39']
include = '\.pyi?$'

# Flake8 설정 (.flake8)
[flake8]
max-line-length = 88
extend-ignore = E203, W503
exclude = .git,__pycache__,venv,.venv

# 실행
black .
flake8 .
```

#### JavaScript/TypeScript (ESLint + Prettier)
```javascript
// .eslintrc.json
{
  "extends": [
    "react-app",
    "react-app/jest",
    "prettier"
  ],
  "rules": {
    "no-console": "warn",
    "no-unused-vars": "warn",
    "prefer-const": "error"
  }
}

// .prettierrc
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2
}
```

### 디버깅 설정
```json
// .vscode/launch.json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Django Server",
      "type": "python",
      "request": "launch",
      "program": "${workspaceFolder}/backend/manage.py",
      "args": ["runserver"],
      "django": true,
      "justMyCode": true
    },
    {
      "name": "React App",
      "type": "chrome",
      "request": "launch",
      "url": "http://localhost:3000",
      "webRoot": "${workspaceFolder}/frontend-chat/src"
    },
    {
      "name": "Jest Tests",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/frontend-chat/node_modules/.bin/jest",
      "args": ["--runInBand"],
      "console": "integratedTerminal"
    }
  ]
}
```

## 🚀 배포와 CI/CD

### Docker 컨테이너화
```dockerfile
# backend/Dockerfile
FROM python:3.11-slim

WORKDIR /app

# 시스템 의존성
RUN apt-get update && apt-get install -y \
    gcc \
    g++ \
    && rm -rf /var/lib/apt/lists/*

# Python 의존성
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# 애플리케이션 코드
COPY . .

# 포트 노출
EXPOSE 8000

# 실행 명령
CMD ["gunicorn", "chat_project.wsgi:application", "--bind", "0.0.0.0:8000"]
```

```dockerfile
# frontend-chat/Dockerfile
FROM node:18-alpine as builder

WORKDIR /app

# 의존성 설치
COPY package*.json ./
RUN npm ci

# 빌드
COPY . .
RUN npm run build

# 프로덕션 이미지
FROM nginx:alpine
COPY --from=builder /app/build /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

### Docker Compose
```yaml
# docker-compose.yml
version: '3.8'

services:
  backend:
    build: ./backend
    ports:
      - "8000:8000"
    volumes:
      - ./backend:/app
      - ./models:/app/models
    environment:
      - DEBUG=False
      - DATABASE_URL=postgresql://user:pass@db:5432/chatdb
    depends_on:
      - db
      - redis

  frontend-chat:
    build: ./frontend-chat
    ports:
      - "3001:80"
    environment:
      - REACT_APP_API_URL=http://backend:8000
    depends_on:
      - backend

  frontend-admin:
    build: ./frontend-admin
    ports:
      - "3002:80"
    environment:
      - REACT_APP_API_URL=http://backend:8000
    depends_on:
      - backend

  db:
    image: postgres:15
    volumes:
      - postgres_data:/var/lib/postgresql/data
    environment:
      - POSTGRES_DB=chatdb
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass

  redis:
    image: redis:7
    ports:
      - "6379:6379"

volumes:
  postgres_data:
```

### GitHub Actions CI/CD
```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test-backend:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Install dependencies
      run: |
        cd backend
        pip install -r requirements.txt
        pip install -r requirements-test.txt
    
    - name: Run tests
      run: |
        cd backend
        pytest --cov=./ --cov-report=xml
    
    - name: Lint
      run: |
        cd backend
        flake8 .
        black --check .

  test-frontend:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
    
    - name: Install and test
      run: |
        cd frontend-chat
        npm ci
        npm run test -- --coverage
        npm run lint
        npm run build

  deploy:
    needs: [test-backend, test-frontend]
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Deploy to server
      env:
        DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }}
        HOST: ${{ secrets.HOST }}
        USER: ${{ secrets.USER }}
      run: |
        # SSH 배포 스크립트
        echo "$DEPLOY_KEY" > deploy_key
        chmod 600 deploy_key
        ssh -i deploy_key $USER@$HOST "cd /app && git pull && docker-compose up -d"
```

### 환경 변수 관리
```bash
# .env.example
# Django
SECRET_KEY=your-secret-key-here
DEBUG=False
ALLOWED_HOSTS=localhost,127.0.0.1

# Database
DATABASE_URL=postgresql://user:pass@localhost:5432/chatdb

# Redis
REDIS_URL=redis://localhost:6379

# LLM
MODEL_PATH=models/mistral-7b-instruct-v0.2.Q4_K_M.gguf
MODEL_CONTEXT_LENGTH=4096
MODEL_MAX_TOKENS=512

# API Keys
OPENAI_API_KEY=sk-...
ANTHROPIC_API_KEY=sk-ant-...
```

### 모니터링과 로깅
```python
# backend/settings.py
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'formatters': {
        'verbose': {
            'format': '{levelname} {asctime} {module} {message}',
            'style': '{',
        },
    },
    'handlers': {
        'file': {
            'level': 'INFO',
            'class': 'logging.handlers.RotatingFileHandler',
            'filename': 'logs/django.log',
            'maxBytes': 1024 * 1024 * 15,  # 15MB
            'backupCount': 10,
            'formatter': 'verbose',
        },
        'console': {
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
            'formatter': 'verbose',
        },
    },
    'root': {
        'handlers': ['console', 'file'],
        'level': 'INFO',
    },
    'loggers': {
        'django': {
            'handlers': ['console', 'file'],
            'level': 'INFO',
            'propagate': False,
        },
        'chat': {
            'handlers': ['console', 'file'],
            'level': 'DEBUG',
            'propagate': False,
        },
    },
}
```

## 🔍 개발 워크플로우

### 일일 개발 루틴
```bash
# 1. 최신 코드 가져오기
git pull origin develop

# 2. 새 기능 브랜치 생성
git checkout -b feature/new-feature

# 3. 개발 서버 시작
# Terminal 1 - Backend
cd backend
uv run python manage.py runserver

# Terminal 2 - Frontend
cd frontend-chat
npm start

# 4. 코드 작성 및 테스트
# 변경사항 확인
git status
git diff

# 5. 커밋
git add .
git commit -m "feat: 새 기능 구현"

# 6. 푸시
git push origin feature/new-feature

# 7. Pull Request 생성
# GitHub에서 PR 생성 및 리뷰 요청
```

### 코드 리뷰 체크리스트
```markdown
## 코드 리뷰 체크리스트

### 기능
- [ ] 요구사항을 충족하는가?
- [ ] 엣지 케이스를 처리하는가?
- [ ] 에러 처리가 적절한가?

### 코드 품질
- [ ] 코드가 읽기 쉬운가?
- [ ] DRY 원칙을 따르는가?
- [ ] 함수/클래스가 단일 책임을 가지는가?

### 테스트
- [ ] 테스트가 작성되었는가?
- [ ] 테스트 커버리지가 충분한가?
- [ ] 테스트가 통과하는가?

### 보안
- [ ] 입력 검증이 되어있는가?
- [ ] 민감한 정보가 노출되지 않는가?
- [ ] SQL Injection 등 취약점이 없는가?

### 성능
- [ ] N+1 쿼리 문제가 없는가?
- [ ] 불필요한 연산이 없는가?
- [ ] 캐싱을 고려했는가?
```

## 📚 참고 자료

### 개발 환경
- [VS Code 문서](https://code.visualstudio.com/docs)
- [Python 개발 환경 설정](https://realpython.com/python-development-environment/)
- [Node.js 베스트 프랙티스](https://github.com/goldbergyoni/nodebestpractices)

### Git & 버전 관리
- [Pro Git Book](https://git-scm.com/book/ko/v2)
- [GitHub Flow](https://docs.github.com/en/get-started/quickstart/github-flow)
- [Conventional Commits](https://www.conventionalcommits.org/)

### Docker & 배포
- [Docker 공식 문서](https://docs.docker.com/)
- [Docker Compose 문서](https://docs.docker.com/compose/)
- [12 Factor App](https://12factor.net/ko/)

### CI/CD
- [GitHub Actions 문서](https://docs.github.com/en/actions)
- [GitLab CI/CD](https://docs.gitlab.com/ee/ci/)
- [Jenkins 문서](https://www.jenkins.io/doc/)

### 패키지 관리
- [uv 문서](https://github.com/astral-sh/uv)
- [npm 문서](https://docs.npmjs.com/)
- [Poetry (Python)](https://python-poetry.org/)

## 🎯 핵심 정리

1. **개발 환경은 일관성**이 중요합니다
2. **버전 관리는 협업의 기본**입니다
3. **자동화 도구**로 생산성을 높입니다
4. **CI/CD**로 배포를 안전하게 합니다
5. **문서화와 주석**은 미래의 나를 위한 것입니다

---

다음: [08-프로젝트-구조-심화.md](./08-프로젝트-구조-심화.md)