# ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

## ğŸ“Š ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°ë„

```mermaid
graph TB
    subgraph "ğŸŒ í´ë¼ì´ì–¸íŠ¸ (ë¸Œë¼ìš°ì €)"
        FC[ì±„íŒ… UI<br/>React App<br/>:3001]
        FA[ê´€ë¦¬ì UI<br/>React App<br/>:3002]
    end
    
    subgraph "ğŸ–¥ï¸ ë°±ì—”ë“œ ì„œë²„"
        subgraph "Django Application"
            API[REST API<br/>Django REST Framework]
            WS[WebSocket<br/>Django Channels]
            AUTH[ì¸ì¦ ì‹œìŠ¤í…œ]
        end
        
        subgraph "AI ì„œë¹„ìŠ¤"
            LLM[LLM Service<br/>llama-cpp-python]
            RAG[RAG Service<br/>ChromaDB]
            PT[Prompt Templates]
        end
        
        subgraph "ë°ì´í„° ì €ì¥ì†Œ"
            DB[(SQLite DB)]
            VDB[(Vector DB<br/>ChromaDB)]
            MF[Model Files<br/>GGUF]
        end
    end
    
    FC -->|HTTP/HTTPS| API
    FC -->|WebSocket| WS
    FA -->|HTTP/HTTPS| API
    
    API --> AUTH
    WS --> AUTH
    
    API --> LLM
    WS --> LLM
    
    LLM --> PT
    LLM --> RAG
    RAG --> VDB
    
    API --> DB
    WS --> DB
    LLM --> MF
    
    style FC fill:#e1f5fe
    style FA fill:#e1f5fe
    style LLM fill:#fff3e0
    style DB fill:#f3e5f5
    style VDB fill:#f3e5f5
```

## ğŸ”„ ë°ì´í„° í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨

```mermaid
sequenceDiagram
    participant U as ì‚¬ìš©ì
    participant F as í”„ë¡ íŠ¸ì—”ë“œ
    participant A as API Server
    participant W as WebSocket
    participant L as LLM Service
    participant D as Database
    
    U->>F: ë©”ì‹œì§€ ì…ë ¥
    F->>W: WebSocket ì—°ê²°
    W->>D: ë©”ì‹œì§€ ì €ì¥
    W->>L: AI ì‘ë‹µ ìš”ì²­
    
    loop ìŠ¤íŠ¸ë¦¬ë°
        L->>W: í…ìŠ¤íŠ¸ ì²­í¬
        W->>F: ì‹¤ì‹œê°„ ì „ì†¡
        F->>U: í™”ë©´ í‘œì‹œ
    end
    
    L->>D: ì™„ì„±ëœ ì‘ë‹µ ì €ì¥
    W->>F: ì™„ë£Œ ì‹ í˜¸
```

## ğŸ—‚ï¸ ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜

```mermaid
graph LR
    subgraph "í”„ë¡ íŠ¸ì—”ë“œ ë ˆì´ì–´"
        UI[UI Components]
        ST[State Management]
        SV[Services]
    end
    
    subgraph "í†µì‹  ë ˆì´ì–´"
        HTTP[HTTP Client<br/>Axios]
        WS2[WebSocket Client]
    end
    
    subgraph "ë°±ì—”ë“œ ë ˆì´ì–´"
        RT[Router]
        VW[Views]
        SR[Serializers]
        CS[Consumers]
    end
    
    subgraph "ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§"
        MD[Models]
        SVC[Services]
        VAL[Validators]
    end
    
    subgraph "AI ë ˆì´ì–´"
        MOD[Model Loader]
        GEN[Text Generator]
        EMB[Embeddings]
    end
    
    UI --> ST
    ST --> SV
    SV --> HTTP
    SV --> WS2
    
    HTTP --> RT
    WS2 --> CS
    
    RT --> VW
    VW --> SR
    VW --> MD
    CS --> MD
    
    MD --> SVC
    SVC --> VAL
    SVC --> MOD
    MOD --> GEN
    MOD --> EMB
```

## ğŸ” ì¸ì¦ í”Œë¡œìš°

```mermaid
graph TD
    Start([ì‚¬ìš©ì ì ‘ì†]) --> Check{ë¡œê·¸ì¸ ì—¬ë¶€}
    Check -->|No| Login[ë¡œê·¸ì¸ í˜ì´ì§€]
    Check -->|Yes| Main[ë©”ì¸ í˜ì´ì§€]
    
    Login --> Input[ì‚¬ìš©ìëª… ì…ë ¥]
    Input --> Submit[ë¡œê·¸ì¸ ìš”ì²­]
    Submit --> API2[API ì„œë²„]
    
    API2 --> Validate{ê²€ì¦}
    Validate -->|ì„±ê³µ| Token[í† í° ë°œê¸‰]
    Validate -->|ì‹¤íŒ¨| Error[ì—ëŸ¬ ë©”ì‹œì§€]
    
    Token --> Store[í† í° ì €ì¥]
    Store --> Main
    Error --> Login
    
    Main --> Request[API ìš”ì²­]
    Request --> CheckToken{í† í° í™•ì¸}
    CheckToken -->|ìœ íš¨| Response[ì‘ë‹µ]
    CheckToken -->|ë§Œë£Œ| Refresh[ê°±ì‹ /ì¬ë¡œê·¸ì¸]
```

## ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ERD

```mermaid
erDiagram
    USER ||--o{ CHAT_SESSION : creates
    CHAT_SESSION ||--o{ MESSAGE : contains
    USER {
        int id PK
        string username
        string email
        datetime created_at
    }
    
    CHAT_SESSION {
        int id PK
        string title
        int user_id FK
        datetime created_at
        datetime updated_at
    }
    
    MESSAGE {
        int id PK
        int session_id FK
        text content
        boolean is_user
        datetime timestamp
    }
    
    PROMPT_TEMPLATE ||--o{ PROMPT_EXAMPLE : has
    PROMPT_TEMPLATE {
        int id PK
        string name
        text system_prompt
        boolean is_active
        datetime created_at
    }
    
    PROMPT_EXAMPLE {
        int id PK
        int template_id FK
        text user_input
        text assistant_output
    }
    
    RAG_DOCUMENT {
        int id PK
        string title
        text content
        json metadata
        datetime created_at
    }
```

## ğŸš€ ë°°í¬ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "ê°œë°œ í™˜ê²½"
        DEV[ê°œë°œì PC]
        LOCAL[ë¡œì»¬ ì„œë²„<br/>localhost:8000]
    end
    
    subgraph "í”„ë¡œë•ì…˜ í™˜ê²½"
        subgraph "í´ë¼ìš°ë“œ/ì„œë²„"
            LB[ë¡œë“œ ë°¸ëŸ°ì„œ]
            subgraph "ì›¹ ì„œë²„"
                WEB1[Nginx]
                WEB2[Nginx]
            end
            subgraph "ì•± ì„œë²„"
                APP1[Django + Gunicorn]
                APP2[Django + Gunicorn]
            end
            subgraph "ë°ì´í„°ë² ì´ìŠ¤"
                PDB[(PostgreSQL)]
                REDIS[(Redis)]
            end
            subgraph "AI ì„œë²„"
                GPU[GPU Server<br/>Model Serving]
            end
        end
    end
    
    subgraph "CI/CD"
        GIT[Git Repository]
        CI[GitHub Actions]
        DOCKER[Docker Registry]
    end
    
    DEV --> GIT
    GIT --> CI
    CI --> DOCKER
    DOCKER --> LB
    
    LB --> WEB1
    LB --> WEB2
    WEB1 --> APP1
    WEB2 --> APP2
    APP1 --> PDB
    APP2 --> PDB
    APP1 --> REDIS
    APP2 --> REDIS
    APP1 --> GPU
    APP2 --> GPU
```

## ğŸ“ˆ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

```mermaid
graph LR
    subgraph "ë©”íŠ¸ë¦­ ìˆ˜ì§‘"
        APP[Application]
        LOG[Logs]
        MET[Metrics]
    end
    
    subgraph "ëª¨ë‹ˆí„°ë§ ë„êµ¬"
        PROM[Prometheus]
        GRAF[Grafana]
        ELK[ELK Stack]
    end
    
    subgraph "ì•Œë¦¼"
        ALERT[Alert Manager]
        SLACK[Slack]
        EMAIL[Email]
    end
    
    APP --> LOG
    APP --> MET
    LOG --> ELK
    MET --> PROM
    PROM --> GRAF
    PROM --> ALERT
    ALERT --> SLACK
    ALERT --> EMAIL
```

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ ë§µ

```mermaid
mindmap
  root((LLM Chat System))
    Frontend
      React 19
      TypeScript
      Material-UI
      Axios
      WebSocket API
    Backend
      Django 5.2
      Django REST Framework
      Django Channels
      Python 3.11
    AI/ML
      llama-cpp-python
      Mistral 7B
      ChromaDB
      Sentence Transformers
    Database
      SQLite (Dev)
      PostgreSQL (Prod)
      Redis (Cache)
      ChromaDB (Vectors)
    DevOps
      Docker
      GitHub Actions
      Nginx
      Gunicorn
    Tools
      VS Code
      Postman
      Git
      uv (Package Manager)
```

## ğŸ¯ ì‹œìŠ¤í…œ í”Œë¡œìš° ì°¨íŠ¸

```mermaid
flowchart TD
    Start([ì‹œì‘]) --> UserInput[ì‚¬ìš©ì ë©”ì‹œì§€ ì…ë ¥]
    UserInput --> Validate{ì…ë ¥ ê²€ì¦}
    
    Validate -->|ìœ íš¨| SendWS[WebSocket ì „ì†¡]
    Validate -->|ë¬´íš¨| ShowError[ì—ëŸ¬ í‘œì‹œ]
    ShowError --> UserInput
    
    SendWS --> SaveUser[ì‚¬ìš©ì ë©”ì‹œì§€ ì €ì¥]
    SaveUser --> CheckRAG{RAG ì‚¬ìš©?}
    
    CheckRAG -->|Yes| SearchDocs[ë¬¸ì„œ ê²€ìƒ‰]
    CheckRAG -->|No| PreparePrompt[í”„ë¡¬í”„íŠ¸ ì¤€ë¹„]
    
    SearchDocs --> AddContext[ì»¨í…ìŠ¤íŠ¸ ì¶”ê°€]
    AddContext --> PreparePrompt
    
    PreparePrompt --> LoadModel[ëª¨ë¸ ë¡œë“œ]
    LoadModel --> Generate[ì‘ë‹µ ìƒì„±]
    
    Generate --> Stream{ìŠ¤íŠ¸ë¦¬ë°?}
    Stream -->|Yes| SendChunk[ì²­í¬ ì „ì†¡]
    SendChunk --> MoreChunks{ë” ìˆìŒ?}
    MoreChunks -->|Yes| SendChunk
    MoreChunks -->|No| Complete[ì™„ë£Œ]
    
    Stream -->|No| SendFull[ì „ì²´ ì „ì†¡]
    SendFull --> Complete
    
    Complete --> SaveAI[AI ì‘ë‹µ ì €ì¥]
    SaveAI --> UpdateUI[UI ì—…ë°ì´íŠ¸]
    UpdateUI --> End([ì¢…ë£Œ])
```

## ğŸ“± ë°˜ì‘í˜• ë””ìì¸ êµ¬ì¡°

```mermaid
graph TD
    subgraph "ë””ë°”ì´ìŠ¤ë³„ ë ˆì´ì•„ì›ƒ"
        Mobile[ëª¨ë°”ì¼<br/>320-768px]
        Tablet[íƒœë¸”ë¦¿<br/>769-1024px]
        Desktop[ë°ìŠ¤í¬í†±<br/>1025px+]
    end
    
    subgraph "ì»´í¬ë„ŒíŠ¸ ì ì‘"
        Nav[ë„¤ë¹„ê²Œì´ì…˜]
        Chat[ì±„íŒ… ì˜ì—­]
        Side[ì‚¬ì´ë“œë°”]
    end
    
    Mobile --> |í–„ë²„ê±° ë©”ë‰´| Nav
    Mobile --> |ì „ì²´ í™”ë©´| Chat
    Mobile --> |ìˆ¨ê¹€| Side
    
    Tablet --> |ì¶•ì†Œ ë©”ë‰´| Nav
    Tablet --> |70%| Chat
    Tablet --> |30%| Side
    
    Desktop --> |ì „ì²´ ë©”ë‰´| Nav
    Desktop --> |60%| Chat
    Desktop --> |40%| Side
```

## ğŸ”’ ë³´ì•ˆ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "ë³´ì•ˆ ë ˆì´ì–´"
        subgraph "ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ"
            HTTPS[HTTPS/TLS]
            CORS[CORS Policy]
            FW[Firewall]
        end
        
        subgraph "ì¸ì¦/ì¸ê°€"
            TOKEN[Token Auth]
            PERM[Permissions]
            SESS[Session Management]
        end
        
        subgraph "ë°ì´í„° ë³´ì•ˆ"
            ENC[Encryption]
            HASH[Password Hashing]
            VALID[Input Validation]
        end
        
        subgraph "AI ë³´ì•ˆ"
            PROMPT[Prompt Injection ë°©ì–´]
            FILTER[Content Filtering]
            LIMIT[Rate Limiting]
        end
    end
    
    Client[í´ë¼ì´ì–¸íŠ¸] --> HTTPS
    HTTPS --> CORS
    CORS --> FW
    FW --> TOKEN
    TOKEN --> PERM
    PERM --> SESS
    SESS --> VALID
    VALID --> PROMPT
    PROMPT --> FILTER
    FILTER --> LIMIT
    LIMIT --> Server[ì„œë²„]
```

## ğŸ“š ì°¸ê³  ìë£Œ

### ì‹œìŠ¤í…œ ì„¤ê³„
- [System Design Primer](https://github.com/donnemartin/system-design-primer)
- [ì›¹ ì•„í‚¤í…ì²˜ ì…ë¬¸](https://blog.rhostem.com/posts/2018-07-22-web-architecture-101)

### ë‹¤ì´ì–´ê·¸ë¨ ë„êµ¬
- [Mermaid ê³µì‹ ë¬¸ì„œ](https://mermaid.js.org/)
- [Draw.io](https://app.diagrams.net/)
- [Lucidchart](https://www.lucidchart.com/)

### ì•„í‚¤í…ì²˜ íŒ¨í„´
- [ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜](https://microservices.io/)
- [í´ë¦° ì•„í‚¤í…ì²˜](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)

---

ë‹¤ìŒ ë¬¸ì„œ: [08-ì‹¤ìŠµ-ê°€ì´ë“œ.md](./08-ì‹¤ìŠµ-ê°€ì´ë“œ.md) ì—ì„œ ì§ì ‘ ì½”ë“œë¥¼ ìˆ˜ì •í•´ë´ìš”!